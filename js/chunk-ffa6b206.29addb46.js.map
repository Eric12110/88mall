{"version":3,"sources":["webpack:///./src/views/Order.vue","webpack:///./src/views/Order.vue?3d30","webpack:///./src/views/Order.vue?233f"],"names":["class","id","type","checked","isLogin","orderList","item","index","key","orderIDList","time","name","total","details","detailItem","subIndex","imgRef","price","qty","data","created","user","q","email","then","val","forEach","doc","ref","push","docs","console","log","window","scrollTo","top","left","directives","el","binding","value","url","src","render","__scopeId"],"mappings":"mNACSA,MAAM,a,GACHC,GAAG,e,qWAWC,eAA+B,SAAxBC,KAAK,WAAWC,QAAA,I,YAClBH,MAAM,W,GACFA,MAAM,a,GACNA,MAAM,a,GACNA,MAAM,a,GACNA,MAAM,a,EACX,eAAiC,OAA5BA,MAAM,aAAY,QAAI,G,EAC3B,eAA8B,OAAzBA,MAAM,aAAY,S,EACvB,eAAqB,KAAlBA,MAAM,SAAO,S,GAIPA,MAAM,S,GAGNA,MAAM,S,GAGNA,MAAM,S,GAGNA,MAAM,S,GAGNA,MAAM,S,EAKnB,eAAwB,OAAnBA,MAAM,QAAM,S,gFAzC7B,eA4CM,MA5CN,EA4CM,CA3CF,eA0CK,KA1CL,EA0CK,CAzCD,E,eAQA,eAAgC,UAAV,QAAK,M,SAAd,EAAAI,Y,mBACb,eA+BK,2BA/BkC,EAAAC,WAAS,SAAxBC,EAAMC,G,wBAA9B,eA+BK,MA/BDP,MAAM,OAAyCQ,IAAKD,G,CACpD,EACA,eAQM,MARN,EAQM,CAPF,eAAqD,MAArD,EAAqD,eAA3B,EAAAE,YAAYF,IAAK,GAC3C,eAA4C,MAA5C,EAA4C,eAAlBD,EAAKI,MAAI,GACnC,eAA4C,MAA5C,EAA4C,eAAlBJ,EAAKK,MAAI,GACnC,eAA6C,MAA7C,EAA6C,eAAnBL,EAAKM,OAAK,GACpC,EACA,EACA,IAEJ,eAkBK,Y,mBAjBD,eAgBK,2BAhB8BN,EAAKO,SAAO,SAApCC,EAAYC,G,wBAAvB,eAgBK,MAhB6CP,IAAKO,EAAUf,MAAM,W,CACnE,eAEM,MAFN,EAEM,C,eADF,eAAmC,sB,GAAnBc,EAAWE,YAE/B,eAEM,MAFN,EAEM,CADF,eAAkC,2BAAzBF,EAAWH,MAAI,KAE5B,eAEM,MAFN,EAEM,CADN,eAAwC,YAAlC,QAAK,eAAGG,EAAWG,OAAK,KAE9B,eAEM,MAFN,EAEM,CADF,eAAoC,YAA9B,MAAG,eAAGH,EAAWI,KAAG,KAE9B,eAEM,MAFN,EAEM,CADF,eAAyD,YAAnD,QAAK,eAAGJ,EAAWG,MAAQH,EAAWI,KAAG,U,QAI3D,O,yFAYD,GACXC,KADW,WAEP,MAAO,CACHf,SAAS,EACTC,UAAW,GACXI,YAAa,KAGrBW,QARW,WAQD,WAEN,eAAmB,QAAM,SAACC,GACtB,GAAGA,EAAM,CACL,IAAMC,EAAI,eAAM,eAAW,OAAI,UAAW,eAAM,QAAS,KAAMD,EAAKE,QACpE,eAAQD,GAAGE,MAAK,SAACC,GACjBA,EAAIC,SAAQ,SAACC,GACT,IAAMC,EAAM,eAAW,OAAI,SAAUD,EAAI1B,GAAI,SAC7C,EAAKQ,YAAYoB,KAAKF,EAAI1B,IAC1B,IAAIkB,EAAOQ,EAAIR,OACf,eAAQS,GAAKJ,MAAK,SAACM,GACf,IAAIjB,EAAU,GACdiB,EAAKJ,SAAQ,SAACC,GACVd,EAAQgB,KAAKF,EAAIR,WAErBA,EAAKN,QAAUA,EACf,EAAKR,UAAUwB,KAAKV,GACpBY,QAAQC,IAAIb,GACZY,QAAQC,IAAI,EAAK3B,yBAMzB,EAAKD,SAAU,KAIvB6B,OAAOC,SAAS,CACZC,IAAK,EACLC,KAAM,KAIdC,WAAY,CACR,QAAW,SAASC,EAAIC,GACpB,IAAIvB,EAASuB,EAAQC,MACrB,eAAcxB,GAAQQ,MAAK,SAACiB,GACxBH,EAAGI,IAAMD,Q,UC/FzB,EAAOE,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"js/chunk-ffa6b206.29addb46.js","sourcesContent":["<template>\n    <div class=\"container\">\n        <ul id=\"order-table\">\n            <li class=\"header\">\n                <div class=\"col col-1\">訂單編號</div>\n                <div class=\"col col-2\">訂單時間</div>\n                <div class=\"col col-3\">收貨人姓名</div>\n                <div class=\"col col-4\">總金額</div>\n                <div class=\"col col-5\">狀態</div>\n                <div class=\"col col-6\">訂單內容</div>\n            </li>\n            <h2 v-show=\"!isLogin\">尚未登入！</h2>\n            <li class=\"item\" v-for=\"item, index in orderList\" :key=\"index\">\n                <input type=\"checkbox\" checked>\n                <div class=\"message\">\n                    <div class=\"col col-1\">{{ orderIDList[index] }}</div>\n                    <div class=\"col col-2\">{{ item.time }}</div>\n                    <div class=\"col col-3\">{{ item.name }}</div>\n                    <div class=\"col col-4\">{{ item.total }}</div>\n                    <div class=\"col col-5\">等待收貨</div>\n                    <div class=\"col col-6 \"></div>\n                    <i class=\"arrow\"></i>\n                </div>\n                <ul>\n                    <li v-for=\"detailItem, subIndex in item.details\" :key=\"subIndex\" class=\"details\">\n                        <div class=\"col-3\">\n                            <img v-ProdImg=\"detailItem.imgRef\">\n                        </div>\n                        <div class=\"col-1\">\n                            <span>{{ detailItem.name }}</span>\n                        </div>\n                        <div class=\"col-3\">\n                        <span>單價 $ {{ detailItem.price }}</span>\n                        </div>\n                        <div class=\"col-3\">\n                            <span>數量 {{ detailItem.qty }}</span>\n                        </div>\n                        <div class=\"col-3\">\n                            <span>總計 $ {{ detailItem.price * detailItem.qty }}</span>\n                        </div>\n                    </li>\n                </ul>\n                <div class=\"line\"></div>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport { db, auth } from \"@/config/firebaseConfig.js\";\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { getProdImgUrl } from \"@/request/api.js\";\n\nexport default {\n    data() {\n        return {\n            isLogin: true,\n            orderList: [],\n            orderIDList: [],\n        }\n    },\n    created() {\n        // 到資料庫抓訂單\n        onAuthStateChanged(auth, (user) => {\n            if(user) {\n                const q = query(collection(db, 'orders'), where('email', '==', user.email));\n                getDocs(q).then((val) => {\n                val.forEach((doc) => {\n                    const ref = collection(db, 'orders', doc.id, 'order');\n                    this.orderIDList.push(doc.id);\n                    let data = doc.data();\n                    getDocs(ref).then((docs) => {\n                        let details = []; \n                        docs.forEach((doc) => {\n                            details.push(doc.data());\n                        });\n                        data.details = details;\n                        this.orderList.push(data);\n                        console.log(data);\n                        console.log(this.orderList);\n                    })\n                });\n                });\n            }\n            else {\n                this.isLogin = false;\n            }\n        })\n\n        window.scrollTo({\n            top: 0,\n            left: 0,\n        });\n\n    },\n    directives: {\n        'ProdImg': function(el, binding) {\n            let imgRef = binding.value;\n            getProdImgUrl(imgRef).then((url) => {\n                el.src = url;\n            })\n        }\n    },\n}\n</script>\n\n<style lang=\"less\" scoped>\n    .container {\n        display: flex;\n        flex-direction: column;\n    }\n    h2 {\n        text-align: center;\n    }\n    #order-table {\n        width: 1200px;\n        margin: 50px auto;\n        margin-bottom: 300px;\n    }\n    #order-table .header, .message, .details {\n        display: flex;\n        justify-content: space-between;\n    }\n    .header {\n        background-color: #95A5A6;\n    }\n    .item {\n        border-right: 1px solid #ddd;\n        border-left: 1px solid #ddd;\n    }\n    .message {\n        &:hover {\n            background-color: rgb(243, 243, 243);\n        }\n        position: relative;\n        padding: 20px;\n    }\n    .details {\n        width: 800px;\n        padding: 15px;\n        margin: auto;\n    }\n    #order-table ul li ul {\n        overflow: auto;\n        max-height: 800px;\n        opacity: 1;\n        transform: translate(0, 0);\n        z-index: 2;\n        transition: opacity .25s ease-in;\n    }\n    #order-table input[type=checkbox] {\n        position: absolute;\n        cursor: pointer;\n        width: 100%;\n        height: 100%;\n        z-index: 1;\n        opacity: 0;\n    }\n    #order-table input[type=checkbox]:checked ~ ul {\n        margin-top: 0;\n        max-height: 0;\n        opacity: 0;\n        transform: translate(0, 50%);\n    }\n    .col {\n        padding: 5px;\n        text-align: center;\n    }\n    .col-1, .col-2 {\n        flex-basis: 20%;\n    }\n    .col-3, .col-4, .col-5, .col-6  {\n        flex-basis: 10%;\n    }\n    .line {\n        height:1px;\n        width:100%;\n        background:#ddd;\n    }\n    img {\n        width: 50px;\n        height: 50px;\n    }\n\n    // 箭頭操作\n    .arrow {\n        position: absolute;\n        top: 45%;\n        right: 65px;\n    }\n    .arrow::before, .arrow::after {\n        content: \"\";\n        position: absolute;\n        background-color: rgb(179, 86, 86);\n        width: 3px;\n        height: 9px;\n    }\n    .arrow::before {\n        transform: translate(-2px, 0) rotate(45deg);\n    }\n    .arrow::after {\n        transform: translate(2px, 0) rotate(-45deg);\n    }\n    #order-table input[type=checkbox]:checked ~ .message>.arrow::before {\n        transform: translate(-2px, 0) rotate(-45deg);\n    }\n    #order-table input[type=checkbox]:checked ~ .message>.arrow::after {\n        transform: translate(2px, 0) rotate(45deg);\n    }\n\n</style>","import { render } from \"./Order.vue?vue&type=template&id=187fa57c&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=187fa57c&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-187fa57c\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Order.vue?vue&type=style&index=0&id=187fa57c&lang=less&scoped=true\""],"sourceRoot":""}