{"version":3,"sources":["webpack:///./src/views/Login.vue?4061","webpack:///./src/assets/image/undraw_remotely_2j6y.svg","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["module","exports","class","src","alt","action","emailWrong","type","login","email","userLogin","placeholder","pdWrong","password","$router","push","id","register","name","emailInvalid","emailRegisted","phone","userRegistration","data","methods","this","then","go","handleUserCart","alert","catch","error","errorCode","code","userData","val","console","log","setTimeout","q","forEach","d","cartRef","localStorage","getItem","items","JSON","parse","item","$store","commit","size","clear","sendPasswordResetEmail","user","render","__scopeId","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match"],"mappings":"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","file":"js/chunk-0821d4a6.08161699.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=9e7a222a&lang=less&scoped=true\"","module.exports = __webpack_public_path__ + \"img/undraw_remotely_2j6y.bad19771.svg\";","<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"left\">\r\n      <img src=\"../assets/image/undraw_remotely_2j6y.svg\" alt=\"\">\r\n    </div>\r\n    <div class=\"login-content\">\r\n      <ul class=\"tab\">\r\n        <li @click=\"action='register'\" :class=\"action==='register' ? 'active' : 'inactive' \">用戶註冊</li>\r\n        <li @click=\"action='login'\" :class=\"action==='login' ? 'active' : 'inactive' \">用戶登入</li>\r\n      </ul>\r\n      <div class=\"form-container\">\r\n        <div class=\"login-form\" v-if=\"action==='login'\">\r\n          <span class=\"title\">登入</span>\r\n          <p v-show=\"emailWrong\">*電子郵件無效!</p>\r\n          <input type=\"text\" v-model=\"login.email\"  @keyup.enter=\"userLogin\" placeholder=\"電子郵件\">\r\n          <p v-show=\"pdWrong\">*密碼錯誤!</p>\r\n          <input type=\"text\" v-model=\"login.password\"  @keyup.enter=\"userLogin\" placeholder=\"密碼\">\r\n          <button class=\"loginBtn\" @click=\"userLogin\">登入</button>\r\n          <span class=\"forgetPwd\" @click=\"this.$router.push('/forgetPwd')\">忘記密碼?</span>\r\n          <span @click=\"$router.push('/admin/product')\" id=\"admin\">進入後台管理</span>\r\n        </div>\r\n        <div class=\"register-form\" v-else>\r\n          <span class=\"title\">註冊</span>\r\n          <input type=\"text\" v-model=\"register.name\" placeholder=\"名字\" >\r\n          <p v-show=\"emailInvalid\">*電子郵件必須含有@或.</p>\r\n          <p v-show=\"emailRegisted\">電子郵件已被註冊過!</p>\r\n          <input type=\"email\" v-model=\"register.email\" placeholder=\"電子郵件\">\r\n          <input type=\"password\" v-model=\"register.password\" placeholder=\"密碼\">\r\n          <input type=\"text\" v-model=\"register.phone\" placeholder=\"手機號碼\">\r\n          <button class=\"registerBtn\" @click=\"userRegistration\">歡迎加入</button>\r\n        </div>\r\n      </div>  \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail} from \"firebase/auth\";\r\nimport { collection, addDoc, getDocs, where, query } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/config/firebaseConfig.js\";\r\n\r\nexport default {\r\n  data() {\r\n      return {\r\n          action: 'login',\r\n          login: {\r\n            email: 'ujhy669917@gmail.com',\r\n            password: '123123123'\r\n          },\r\n          register: {\r\n            name: '',\r\n            email:'',\r\n            password: '',\r\n            phone: ''\r\n          },\r\n          pdWrong: false,\r\n          emailWrong: false,\r\n          emailInvalid: false,\r\n          emailRegisted: false,\r\n          \r\n      }\r\n  },\r\n  methods: {\r\n    userLogin() {\r\n        signInWithEmailAndPassword(auth, this.login.email, this.login.password)\r\n        .then(()=> {\r\n          this.$router.go(-1);\r\n          this.handleUserCart();\r\n          alert('Successfully login!.');\r\n        })\r\n        .catch((error)=> {\r\n           const errorCode = error.code;\r\n           this.emailWrong = errorCode == 'auth/user-not-found' ? true : false;\r\n           this.pdWrong = errorCode == 'auth/wrong-password' ? true : false;        \r\n        })\r\n    },\r\n\r\n    userRegistration() {\r\n        createUserWithEmailAndPassword(auth, this.register.email, this.register.password).then(() => {\r\n            alert('註冊成功!'); \r\n            // 添加文檔至forestore\r\n            let userData = {\r\n              name: this.register.name,\r\n              email: this.register.email,\r\n              password: this.register.password,\r\n              phone: this.register.phone,\r\n            };\r\n            addDoc(collection(db, 'users'), userData).then((val)=>{\r\n              console.log('以添加文檔至forestore' + val.id);\r\n            });\r\n          }).catch((error) => {\r\n              const errorCode = error.code;\r\n              this.emailInvalid = errorCode == 'auth/invalid-email' ? true : false;\r\n              this.emailRegisted = errorCode == 'auth/email-already-in-use' ? true : false;\r\n              setTimeout(() => {\r\n                this.emailInvalid = false; \r\n                this.emailRegisted = false;\r\n              }, 2000);     \r\n          })\r\n    },\r\n\r\n    // 把 localStorage data 傳到 資料庫\r\n    handleUserCart() {\r\n      const q = query(collection(db, 'users'), where('email', '==', this.login.email))\r\n      getDocs(q).then((val) => {\r\n          val.forEach((d) => {\r\n              const cartRef = collection(db, 'users', d.id, 'cart');\r\n              if(localStorage.getItem('products_in_cart') !== null) {\r\n                let items = JSON.parse(localStorage.getItem('products_in_cart'));\r\n                items.forEach((item) => {\r\n                  addDoc(cartRef, item);\r\n                })\r\n              }\r\n              getDocs(cartRef).then((val) => {\r\n                console.log(val);\r\n                  this.$store.commit('setCart', val.size);\r\n              });\r\n              localStorage.clear('products_in_cart');\r\n              \r\n          })\r\n      })\r\n    },\r\n\r\n    sendPasswordResetEmail() {\r\n        sendPasswordResetEmail(auth, this.user.email).then(() => {\r\n            alert('已傳送至' + this.user.email + '信箱中');\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .login-container{\r\n      display: flex;\r\n      width: 1200px;\r\n      height: 700px;\r\n      margin: 0 auto;\r\n      .login-container div {\r\n          width: 50%;\r\n      }\r\n  }\r\n  .left {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      img {\r\n          width: 65%;\r\n      }\r\n  }\r\n\r\n  .login-content {\r\n    width: 600px;\r\n    margin: 50px auto;\r\n    padding-bottom: 20px;\r\n    border: 1px solid #ebebeb;\r\n  }\r\n\r\n  .tab {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 0;\r\n    padding: 0;\r\n    color: #d4d4d4;\r\n    font-weight: 500;\r\n    li {\r\n      width: 50%;\r\n      padding: 20px 0;\r\n      text-align: center;\r\n      cursor: pointer;\r\n      &:first-child {\r\n        border-right: 1px solid #ebebeb;\r\n      }\r\n    }\r\n  }\r\n\r\n  .form-container {\r\n    width: 75%;\r\n    margin: 30px auto;\r\n    .title {\r\n      margin-bottom: 20px;\r\n      text-align: center;\r\n    }\r\n    .login-form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      span:last-child {\r\n        margin-top: 10px;\r\n      }\r\n      .forgetPwd {\r\n        margin-top: 5px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        color: var(--color-gray);\r\n        font-size: 14px;\r\n      }\r\n      #admin {\r\n        color:cornflowerblue;\r\n        text-decoration: underline;\r\n        font-size: 14px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    .register-form {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n    input {\r\n      margin: 15px;\r\n      padding: 10px 20px;\r\n      border: none;\r\n      border-radius: 2.5px;\r\n      background-color: rgb(243 243 243);\r\n      color: #646464;\r\n      font-size: 1rem;\r\n      line-height: 1.5rem;\r\n    }\r\n    button {\r\n      width: 50%;\r\n      height: 60px;\r\n      border: var(--color-lighten-orange) 1px solid;\r\n      background: var(--color-lighten-orange);\r\n      color: whitesmoke;\r\n      font-weight: 600;\r\n      margin: 15px auto;\r\n      cursor: pointer;\r\n      border-radius: 5px;\r\n    }\r\n    select {\r\n      height: 30px;\r\n      text-indent: 0.5rem;\r\n      margin: 10px;\r\n    }\r\n  }\r\n    \r\n    \r\n    p {\r\n      margin: 0;\r\n      font-size: 12px;\r\n      color: red;\r\n      margin-left: 5px;\r\n      margin-bottom: 5px;\r\n    }\r\n\r\n    .title {\r\n      color: #777777;\r\n    }\r\n\r\n    .active {\r\n      color: var(--color-lighten-orange); \r\n      border-top: 3px solid var(--color-lighten-orange);\r\n    }\r\n    .inactive {\r\n      border-bottom: 1px solid #ebebeb; \r\n      background-color: #fcfcfc;\r\n    }\r\n\r\n    /* webkit scrollbar 自訂樣式 */\r\n    ::-webkit-scrollbar {\r\n    width: 5px;\r\n    }\r\n    /* track 軌道的樣式 */\r\n    ::-webkit-scrollbar-track {\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n    margin-left: 5px;\r\n    background-color: #3838387c;\r\n    }\r\n    /* thumb bar的樣式 */\r\n    ::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 4px;\r\n    border-radius: 4px;\r\n    background:   rgba(211, 211, 211, 0.5);\r\n    }\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=9e7a222a&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=9e7a222a&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-9e7a222a\"\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}