(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88c99770"],{"5e4e":function(t,e,c){},b277:function(t,e,c){"use strict";var n=c("7a23");Object(n["x"])("data-v-7d84fd5d");var i={class:"buyflow-container"},l={class:"icon-container"},o=Object(n["g"])("div",{class:"word-container"},[Object(n["g"])("div",{class:"word"},[Object(n["g"])("span",null,"商店")]),Object(n["g"])("div",{class:"word"},[Object(n["g"])("span",null,"確認購物車")]),Object(n["g"])("div",{class:"word"},[Object(n["g"])("span",null,"結帳")])],-1);function a(t,e,c,a,s,r){var u=Object(n["C"])("box-icon");return Object(n["u"])(),Object(n["f"])("div",i,[Object(n["g"])("div",l,[Object(n["g"])("div",{class:"box",onClick:e[0]||(e[0]=function(e){return t.$router.push("/products")})},[Object(n["j"])(u,{name:"shopping-bag"})]),Object(n["g"])("div",{class:Object(n["p"])(["box",c.isCartStep?"active":""]),onClick:e[1]||(e[1]=function(e){return t.$router.push("/cart")})},[Object(n["j"])(u,{name:"cart"})],2),Object(n["g"])("div",{class:Object(n["p"])(["box",c.isCartStep?"":"active"]),onClick:e[2]||(e[2]=function(e){return t.$router.push("/checkout")})},[Object(n["j"])(u,{name:"credit-card"})],2)]),o])}Object(n["v"])();c("3357");var s={name:"BuyFlow",data:function(){return{}},props:["isCartStep"]};c("d5f2");s.render=a,s.__scopeId="data-v-7d84fd5d";e["a"]=s},b789:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23");Object(n["x"])("data-v-725f58e5");var i={class:"cart-wrap"},l={class:"cart-container"},o=Object(n["g"])("h2",null,[Object(n["g"])("span",null,"購物車")],-1),a={class:"sm-cart-count"},s={class:"cart-table"},r=Object(n["h"])('<li class="table-header" data-v-725f58e5><div class="col col-1" data-v-725f58e5>商品名稱</div><div class="col col-2" data-v-725f58e5>規格</div><div class="col col-3" data-v-725f58e5>單價</div><div class="col col-4" data-v-725f58e5>數量</div><div class="col col-5" data-v-725f58e5>小計</div><div class="col col-6" data-v-725f58e5>移除</div></li>',1),u={key:0,class:"no-item"},b=Object(n["g"])("span",null,"無商品!",-1),d=[b],j=["id"],O={class:"col col-1"},f=["onClick"],v=["onClick"],g={class:"col col-2"},p={key:0},h={key:1},m={class:"col col-3"},k={class:"col col-4"},y=["onClick"],C=["onUpdate:modelValue"],w=["onClick"],I={class:"col col-5"},F={class:"col col-6"},$=["onClick"],x={class:"cart-count"},D=Object(n["g"])("thead",null,null,-1),T=Object(n["g"])("th",null,"小計",-1),_=Object(n["g"])("tr",{class:"shipping"},[Object(n["g"])("th",null,"運費"),Object(n["g"])("td",null,"free")],-1),q=Object(n["g"])("th",null,"總計",-1);function S(t,e,c,b,S,B){var J=Object(n["C"])("BuyFlow"),Q=Object(n["C"])("box-icon"),R=Object(n["D"])("ProdImg");return Object(n["u"])(),Object(n["f"])("div",i,[Object(n["g"])("div",l,[o,Object(n["g"])("div",a,[Object(n["g"])("span",null,Object(n["F"])(B.itemTotal)+" 件產品，$ ",1),Object(n["g"])("strong",null,Object(n["F"])(B.pirceTotal),1)]),Object(n["j"])(J,{isCartStep:!0}),Object(n["g"])("ul",s,[r,0===B.itemTotal?(Object(n["u"])(),Object(n["f"])("li",u,d)):Object(n["e"])("",!0),(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(S.items,(function(t,e){return Object(n["u"])(),Object(n["f"])("li",{class:"item-row",key:e,id:e},[Object(n["g"])("div",O,[Object(n["O"])(Object(n["g"])("img",{onClick:function(e){return B.productRouter(t.id)}},null,8,f),[[R,t.imgRef]]),Object(n["g"])("span",{onClick:function(e){return B.productRouter(t.id)}},Object(n["F"])(t.name),9,v)]),Object(n["g"])("div",g,[t.spec||t.size?(Object(n["u"])(),Object(n["f"])("span",p,Object(n["F"])(t.spec)+" "+Object(n["F"])(t.size),1)):(Object(n["u"])(),Object(n["f"])("span",h,"無"))]),Object(n["g"])("div",m,"$ "+Object(n["F"])(t.price),1),Object(n["g"])("div",k,[Object(n["g"])("div",null,[Object(n["g"])("button",{onClick:function(t){return B.addQty(e)}},"+",8,y),Object(n["O"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":function(e){return t.qty=e}},null,8,C),[[n["J"],t.qty]]),Object(n["g"])("button",{onClick:function(t){return B.reduceQty(e)}},"-",8,w)])]),Object(n["g"])("div",I,"$ "+Object(n["F"])(t.price*t.qty),1),Object(n["g"])("div",F,[Object(n["g"])("a",{onClick:function(t){return B.deleteItem(e)}},[Object(n["j"])(Q,{name:"trash",color:"#646464"})],8,$)])],8,j)})),128))]),Object(n["g"])("div",x,[Object(n["g"])("table",null,[D,Object(n["g"])("tbody",null,[Object(n["g"])("tr",null,[T,Object(n["g"])("td",null,"$ "+Object(n["F"])(B.pirceTotal),1)]),_]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[q,Object(n["g"])("td",null,"$ "+Object(n["F"])(B.pirceTotal),1)])])]),Object(n["g"])("button",{onClick:e[0]||(e[0]=function(){return B.checkout&&B.checkout.apply(B,arguments)})},"結帳")])])])}Object(n["v"])();c("159b");var B=c("ee2e"),J=c("e71f"),Q=c("ea7b"),R=c("fd03"),E=c("b277"),z=(c("3357"),{name:"Cart",components:{BuyFlow:E["a"]},data:function(){return{userID:null,items:[],itemsID:[]}},computed:{pirceTotal:function(){for(var t=0,e=0;e<this.items.length;e++)""!==this.items[e]&&(t+=this.items[e].price*this.items[e].qty);return t},itemTotal:function(){for(var t=0,e=0;e<this.items.length;e++)""!==this.items[e]&&t++;return t}},created:function(){var t=this;Object(Q["c"])(B["a"],(function(e){if(e){var c=Object(J["h"])(Object(J["b"])(B["b"],"users"),Object(J["j"])("email","==",e.email));Object(J["f"])(c).then((function(e){e.forEach((function(e){t.userID=e.id;var c=Object(J["b"])(B["b"],"users",e.id,"cart");Object(J["f"])(c).then((function(e){e.forEach((function(e){t.itemsID.push(e.id),t.items.push(e.data())}))}))}))}))}else null!==localStorage.getItem("products_in_cart")&&(t.items=JSON.parse(localStorage.getItem("products_in_cart")))})),window.scrollTo({top:0,left:0})},methods:{deleteItem:function(t){var e=this,c=document.getElementById(t);c.remove(),this.$store.commit("reduceCart"),Object(J["c"])(Object(J["d"])(B["b"],"users",this.userID,"cart",this.itemsID[t])).then((function(){e.items[t]=""}))},productRouter:function(t){this.$router.push("/details?id=".concat(t))},addQty:function(t){this.items[t].qty++},reduceQty:function(t){var e=this.items[t].qty;e>1&&this.items[t].qty--},checkout:function(){null!=this.userID&&0!=this.items.length?this.$router.push("/checkout"):alert("請先登入會員或無商品在購物車！")}},directives:{ProdImg:function(t,e){var c=e.value;Object(R["b"])(c).then((function(e){t.src=e}))}}});c("e013");z.render=S,z.__scopeId="data-v-725f58e5";e["default"]=z},bca8:function(t,e,c){},d5f2:function(t,e,c){"use strict";c("bca8")},e013:function(t,e,c){"use strict";c("5e4e")}}]);
//# sourceMappingURL=chunk-88c99770.9932912e.js.map