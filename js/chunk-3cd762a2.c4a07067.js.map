{"version":3,"sources":["webpack:///./src/components/user/UserProfile.vue?3071","webpack:///./src/views/User.vue","webpack:///./src/components/user/UserProfile.vue","webpack:///./src/components/user/UserProfile.vue?eaad","webpack:///./src/components/user/UserOrder.vue","webpack:///./src/components/user/UserOrder.vue?9eb2","webpack:///./src/components/user/UserMessage.vue","webpack:///./src/components/user/UserMessage.vue?ec5a","webpack:///./src/components/user/UserTrack.vue","webpack:///./src/components/user/UserTrack.vue?1f75","webpack:///./src/views/User.vue?a29a","webpack:///./src/components/user/UserTrack.vue?0de3","webpack:///./src/components/user/UserOrder.vue?5987","webpack:///./src/views/User.vue?e158"],"names":["class","action","for","type","id","user","name","email","phone","address","placeholder","sendPasswordResetEmail","saveProfile","signout","data","created","currentUser","this","q","then","val","forEach","doc","console","log","methods","docRef","saveData","merge","alert","$store","commit","$router","push","catch","err","render","__scopeId","items","item","index","key","productRouter","imgRef","price","deleteItem","color","userID","itemsID","trackRef","docs","el","document","getElementById","remove","directives","binding","value","url","src","userName","userEmail","userAddress","userPhone","components","UserProfile","UserOrder","UserMessage","UserTrack"],"mappings":"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","file":"js/chunk-3cd762a2.c4a07067.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserProfile.vue?vue&type=style&index=0&id=51f6e116&lang=less&scoped=true\"","<template>\r\n    <div class=\"user-wrapper\">\r\n        <div class=\"user-container\">\r\n            <div class=\"tab\">\r\n                <ul>\r\n                    <li @click=\"action = 'profile'\" :class=\"action === 'profile' ? 'active' : 'inactive'\"><span>用戶資料</span></li>\r\n                    <li @click=\"action = 'track'\" :class=\"action === 'track' ? 'active' : 'inactive'\"><span>追蹤商品</span></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"tab-content\">\r\n                <!-- profile 區塊 -->\r\n                <UserProfile v-if=\"action === 'profile'\"></UserProfile>\r\n                <!-- order 區塊 -->\r\n                <UserOrder v-else-if=\"action === 'order'\"></UserOrder>\r\n                    \r\n                <!-- message 區塊 -->\r\n                <UserMessage v-else-if=\"action === 'message'\"></UserMessage>   \r\n                    \r\n                <!-- like 區塊 -->\r\n                <UserTrack v-else></UserTrack>\r\n                    \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport UserProfile from '@/components/user/UserProfile.vue';\r\nimport UserOrder from '@/components/user/UserOrder.vue';\r\nimport UserMessage from '@/components/user/UserMessage.vue';\r\nimport UserTrack from '@/components/user/UserTrack.vue';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            action: 'profile',\r\n            userName: null,\r\n            userEmail: null,\r\n            userAddress: null,\r\n            userPhone: null,\r\n        }\r\n    },\r\n    components: { UserProfile, UserOrder, UserMessage, UserTrack },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .user-wrapper {\r\n        min-width: 1200px;\r\n        margin-top: 50px;\r\n        margin-bottom: 100px;\r\n        .user-container {\r\n            width: 80%;\r\n            height: 500px;\r\n            display: flex;\r\n            margin: 0 auto;\r\n            .tab {\r\n                width: 150px;\r\n                height: 100%;\r\n                ul{\r\n                    height: 100%;\r\n                    li {\r\n                        display: flex;\r\n                        height: 25%;\r\n                        box-sizing: border-box;\r\n                        cursor: pointer;\r\n                        border-bottom: 1px solid #aaa;\r\n                        border-left: 1px solid #aaa;\r\n                        span {\r\n                            margin: auto;\r\n                        }\r\n                        &:nth-of-type(1) {\r\n                            border-top: 1px solid #aaa;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // tab-content\r\n            .tab-content {\r\n                width: 100%; \r\n                border: 1px solid #aaa;\r\n            }\r\n        }\r\n    }\r\n\r\n    .active {\r\n        background-color: #fff;\r\n        &::before {\r\n            content: '';\r\n            width: 7px;\r\n            height: 100%;\r\n            background-color: #ffe100;\r\n            position: relative;\r\n            left: -5px;\r\n        }\r\n        &::after {\r\n            content: '';\r\n            position: relative;\r\n            z-index: 2;\r\n            right: -5px;\r\n            width: 7px;\r\n            height: 100%;\r\n            background-color: #ffffff;\r\n        }\r\n    }\r\n    .inactive {\r\n        color: var(--color-gray);\r\n        background-color: rgb(252, 252, 252);\r\n    }\r\n</style>","<template>\r\n    <div class=\"profile-wrap\">\r\n        <h2><span class=\"profile-title\">編輯個人資料</span></h2>\r\n        <div class=\"profile-contianer\">\r\n            <div>\r\n                <label for=\"user-name\">用戶姓名</label>\r\n                <input type=\"text\" id=\"user-name\" v-model=\"user.name\">\r\n            </div>\r\n            <div>\r\n                <label>電子郵件</label>\r\n                <span>{{ user.email }}</span>\r\n            </div>\r\n            <div>\r\n                <label for=\"user-phone\">連絡電話</label>\r\n                <input type=\"text\" id=\"user-phone\" v-model=\"user.phone\">\r\n            </div>\r\n            <div>\r\n                <label for=\"user-address\">儲存的地址</label>\r\n                <input type=\"text\" id=\"user-address\" v-model=\"user.address\" placeholder=\"新增送貨地址\">\r\n            </div>\r\n            <div class=\"reset-pwd-content\">\r\n                <label>更改密碼</label>    \r\n                <span @click=\"sendPasswordResetEmail\">發送密碼重置郵件</span>\r\n            </div>\r\n            <div class=\"btn-box\">\r\n                <button id=\"profile-save-btn\" @click=\"saveProfile\">儲存</button> \r\n                <button id=\"user-signout\" @click=\"signout\">登出</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { signOut, sendPasswordResetEmail } from \"firebase/auth\";\r\nimport { collection, query, where, getDocs, doc, setDoc } from \"firebase/firestore\";\r\nimport { db, auth } from \"@/config/firebaseConfig.js\";\r\n\r\nexport default {\r\n    name: 'UserProfile',\r\n    data() {\r\n        return {\r\n            user: {\r\n                id: null,\r\n                name: null,\r\n                email: null, \r\n                address: null,\r\n                phone: null,\r\n            },\r\n        }\r\n    },\r\n    created() {\r\n        // 獲取當前登錄的用戶方面\r\n        // firebase 推薦 onAuthStateChanged() 而非 currentUser()\r\n        // currentUser() 網頁f5 登入狀態就會消失\r\n        const user = auth.currentUser;\r\n        if(user) {\r\n            const email = user.email;\r\n            this.user.email = email;\r\n            // 從 firestore搜尋 email相符的資料\r\n            const q = query(collection(db, 'users'), where('email', '==', email))\r\n            getDocs(q).then((val) => {\r\n                val.forEach((doc) => {\r\n                    let data = doc.data();\r\n                    // 此 id為 firestore文件 ID\r\n                    this.user.id = doc.id;\r\n                    this.user.name = data.name;\r\n                    this.user.address = data.address;\r\n                    this.user.phone = data.phone;\r\n                })\r\n            })\r\n        }else {\r\n            console.log('無人登入!');\r\n        }\r\n\r\n    },\r\n    methods: {\r\n        saveProfile() {\r\n            let docRef = doc(db, 'users', this.user.id);\r\n            let saveData = {\r\n                name: this.user.name,\r\n                address: this.user.address,\r\n                phone: this. user.phone\r\n            };\r\n            setDoc(docRef, saveData, { merge: true }).then(() => {\r\n                // setDoc 第三個參數設定合併，防止資料遭到覆蓋\r\n                alert('會員資料成功改寫!')\r\n            });\r\n        },\r\n\r\n        signout() {\r\n            signOut(auth).then(() => {\r\n                alert('會員已登出');\r\n                this.$store.commit('setCart', 0);\r\n                this.$router.push('/login');\r\n            }).catch((err) => {\r\n                console.log(err);    \r\n            })\r\n        },\r\n\r\n        sendPasswordResetEmail() {\r\n            sendPasswordResetEmail(auth, this.user.email).then(() => {\r\n                alert('已傳送至' + this.user.email + '信箱中');\r\n            })\r\n        },\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .profile-wrap {\r\n        margin: 15px 100px;\r\n        .profile-title {\r\n            position: relative;\r\n        }\r\n        .profile-title:before {\r\n            content: \"\";\r\n            z-index: -1;\r\n            position: absolute;\r\n            height: 0.5em;\r\n            top: 0.8em;\r\n            background: var(--color-dark-yellow);\r\n            width: 100%;\r\n        }\r\n        .profile-contianer {\r\n            margin-top: 40px;\r\n            div {\r\n                margin: 30px;\r\n                label {\r\n                    margin-right: 30px;\r\n                }\r\n            }\r\n            .reset-pwd-content {\r\n                span {\r\n                    cursor: pointer;\r\n                    color: rgb(64, 120, 224);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    input {\r\n        font-size: 14px;\r\n        border: var(--color-gray) 1px solid;\r\n        padding: .4rem;\r\n        border-radius: 5px;\r\n    }\r\n    .btn-box {\r\n        button {\r\n            width: 80px;\r\n            height: 50px;\r\n            font-weight: 600;\r\n            border: var(--color-gray) 0px solid;\r\n            background: rgb(235, 235, 235);\r\n            margin-right: 15px;  \r\n            margin-top: 20px;\r\n            cursor: pointer;   \r\n            &:hover {\r\n                background: yellow;\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./UserProfile.vue?vue&type=template&id=51f6e116&scoped=true\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js\"\n\nimport \"./UserProfile.vue?vue&type=style&index=0&id=51f6e116&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-51f6e116\"\n\nexport default script","<template>\r\n    <div class=\"order-wrap\">\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"title\">訂單編號</th>\r\n                    <th class=\"title\">商品名稱</th>\r\n                    <th class=\"title\">數量</th>\r\n                    <th class=\"title\">下定日期</th>\r\n                    <th class=\"title\">進度</th>\r\n                    <th class=\"title\">付款方式</th>\r\n                    <th class=\"title\">總價</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>51239845</td>\r\n                    <td>色鉛筆</td>\r\n                    <td>5</td>\r\n                    <td>2021/12/10</td>\r\n                    <td>已到達物流中心</td>\r\n                    <td>信用卡已支付</td>\r\n                    <td>250</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>51239845</td>\r\n                    <td>色鉛筆</td>\r\n                    <td>5</td>\r\n                    <td>2021/12/10</td>\r\n                    <td>已到達物流中心</td>\r\n                    <td>信用卡已支付</td>\r\n                    <td>250</td>\r\n                </tr>\r\n                                <tr>\r\n                    <td>51239845</td>\r\n                    <td>色鉛筆</td>\r\n                    <td>5</td>\r\n                    <td>2021/12/10</td>\r\n                    <td>已到達物流中心</td>\r\n                    <td>信用卡已支付</td>\r\n                    <td>250</td>\r\n                </tr>\r\n                                <tr>\r\n                    <td>51239845</td>\r\n                    <td>色鉛筆</td>\r\n                    <td>5</td>\r\n                    <td>2021/12/10</td>\r\n                    <td>已到達物流中心</td>\r\n                    <td>信用卡已支付</td>\r\n                    <td>250</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .order-wrap {\r\n        margin: 15px 0;\r\n        table {\r\n            width: 90%;\r\n            border-collapse: collapse;\r\n            margin: 0 auto;\r\n            thead {\r\n                tr {\r\n                    border: var(--color-gray) 1px solid;\r\n                    background: rgb(235, 235, 235);\r\n                    margin-bottom: 100px;\r\n                }\r\n            }\r\n            tbody {\r\n                tr {\r\n                    border: var(--color-gray) 1px solid;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    th, td {\r\n        padding: 16px;\r\n    }\r\n</style>","import { render } from \"./UserOrder.vue?vue&type=template&id=07b57faf&scoped=true\"\nimport script from \"./UserOrder.vue?vue&type=script&lang=js\"\nexport * from \"./UserOrder.vue?vue&type=script&lang=js\"\n\nimport \"./UserOrder.vue?vue&type=style&index=0&id=07b57faf&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-07b57faf\"\n\nexport default script","<template>\r\n    <div>132</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>","import { render } from \"./UserMessage.vue?vue&type=template&id=2bc4bb57\"\nimport script from \"./UserMessage.vue?vue&type=script&lang=js\"\nexport * from \"./UserMessage.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n    <div class=\"track-container\">\r\n        <ul class=\"track-table\">\r\n            <li class=\"table-header\">\r\n                <div class=\"col col-1\">商品連結</div>\r\n                <div class=\"col col-2\">商品名稱</div>\r\n                <div class=\"col col-3\">單價</div>\r\n                <div class=\"col col-4\">移除</div>\r\n            </li>\r\n            <div class=\"item-container\">\r\n                <li class=\"item-row\" v-for=\"(item, index) in items\" :key=\"index\" :id=\"index\">\r\n                    <div class=\"col col-1\">\r\n                        <img v-ProdImg=\"item.imgRef\" @click=\"productRouter(item.id)\">\r\n                    </div>\r\n                    <div class=\"col col-2\">{{ item.name }}</div>\r\n                    <div class=\"col col-3\">$ {{ item.price }}</div>\r\n                    <div class=\"col col-4\">\r\n                        <a @click=\"deleteItem(index)\">\r\n                            <box-icon name='trash' color='#464646' ></box-icon>\r\n                        </a>\r\n                    </div>\r\n                </li>\r\n            </div>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { db, auth } from \"@/config/firebaseConfig.js\";\r\nimport { doc, collection, query, where, getDocs, deleteDoc } from \"firebase/firestore\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getProdImgUrl } from \"@/request/api.js\";\r\nimport 'boxicons';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            userID: null,\r\n            itemsID: [],\r\n            items: []\r\n        }\r\n    },\r\n    created() {\r\n        onAuthStateChanged(auth, (user) => {\r\n            if(user) {\r\n                const q = query(collection(db, 'users'), where('email', '==', user.email));\r\n                getDocs(q).then((val) => {\r\n                val.forEach((doc) => {\r\n                    this.userID = doc.id;\r\n                    const trackRef = collection(db, 'users', doc.id, 'track');\r\n                    getDocs(trackRef).then((docs) => {\r\n                        docs.forEach((doc) => {\r\n                            this.itemsID.push(doc.id);\r\n                            this.items.push(doc.data());\r\n                        })\r\n                    })\r\n                });\r\n                });\r\n            }\r\n            else {\r\n                console.log('尚未登入');\r\n            }\r\n        })\r\n    },\r\n    methods: {\r\n        deleteItem(index) {\r\n            let el = document.getElementById(index);\r\n            el.remove();\r\n            deleteDoc(doc(db, 'users', this.userID, 'track', this.itemsID[index])).then(() => {\r\n                this.items[index] = \"\";\r\n            });\r\n        },\r\n\r\n    },\r\n    directives: {\r\n        'ProdImg': function(el, binding) {\r\n            let imgRef = binding.value;\r\n            getProdImgUrl(imgRef).then((url) => {\r\n                el.src = url;\r\n            })\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.track-container {\r\n    padding: 15px;\r\n}\r\n.track-table {\r\n    li {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-bottom: 25px;\r\n    }\r\n    .table-header {\r\n        padding: 15px;\r\n        background-color: rgb(238, 219, 52);\r\n    }\r\n    .item-container {\r\n        height: 375px;\r\n        overflow: auto;\r\n    }\r\n    .item-row {\r\n        font-weight: 300;\r\n        &:hover {\r\n            background-color: rgb(250, 250, 250);\r\n        }\r\n        img {\r\n            width: 80px;\r\n            height: 80px;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .col {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .col-1 {\r\n        flex-basis: 15%;\r\n    }\r\n    .col-2 {\r\n        flex-basis: 65%;\r\n    }\r\n    .col-3 {\r\n        flex-basis: 10%;\r\n    }\r\n    .col-4 {\r\n        flex-basis: 10%;\r\n    }\r\n    box-icon {\r\n        cursor: pointer;\r\n    }\r\n}\r\n</style>","import { render } from \"./UserTrack.vue?vue&type=template&id=1b01409e&scoped=true\"\nimport script from \"./UserTrack.vue?vue&type=script&lang=js\"\nexport * from \"./UserTrack.vue?vue&type=script&lang=js\"\n\nimport \"./UserTrack.vue?vue&type=style&index=0&id=1b01409e&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1b01409e\"\n\nexport default script","import { render } from \"./User.vue?vue&type=template&id=36b5f02e&scoped=true\"\nimport script from \"./User.vue?vue&type=script&lang=js\"\nexport * from \"./User.vue?vue&type=script&lang=js\"\n\nimport \"./User.vue?vue&type=style&index=0&id=36b5f02e&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-36b5f02e\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserTrack.vue?vue&type=style&index=0&id=1b01409e&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserOrder.vue?vue&type=style&index=0&id=07b57faf&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./User.vue?vue&type=style&index=0&id=36b5f02e&lang=less&scoped=true\""],"sourceRoot":""}